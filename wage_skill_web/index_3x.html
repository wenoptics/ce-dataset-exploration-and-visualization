<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>H-1B Employment • Wage • Skill</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <style>
        html, body, figure {
            margin: 0;
            margin-block-start: 0;
            margin-block-end: 0;
        }

        .svg {
            width: 100vw;
        }

        #svg-container {
            position: relative;
        }

        #svg-container > figure {
            top: 0;
            left: 0;
            position: absolute;
            pointer-events: none;
        }

        #svg-container > figure:first-child {
            position: static;
            pointer-events: auto;
        }

        #svg-container > figure:nth-last-child(2) {
        }

        .section-block {
            padding: 2rem 1rem;
            background-color: #e9ecef;
        }

        .bg-cf-social {
            background-color: #3864A9;
        }
        .bg-cf-problem {
            background-color: #66C1D2;
        }
        .bg-cf-tech {
            background-color: #86CFC1;
        }
        .bg-cf-system {
            background-color: #A2C6A1;
        }
        .bg-cf-resource {
            background-color: #CBCFA3;
        }

        .card {
            border-radius: 0;
            text-align: center;
            opacity: 0.75;
            transition: all 500ms;
        }

        .card:hover {
            opacity: 1;
        }

        .card-header {
            display: none;
        }

        .cf-icon {
            fill: #fff;
            display: inline-block;
            width: 3em;
            height: 3em;
            background-size: cover;
            filter: invert(1);
        }

        .card-title {
            margin-bottom: 1em;
        }

        .hover-dash {
            text-decoration: none;
            border-bottom: 2px dashed #906e29;
            cursor: pointer;
        }
        .hover-dash:hover {
            border-bottom: 2px dotted #906e29;
        }

    </style>
</head>
<body>

<div class="section-block" style="background-color: #FBF7F2">
    <div class="container">
        <h1 class="display-6">Employment • Wage • Skill</h1>
        <p>
            A plot tries to answer the questions like <a class="hover-dash"><i>What kinds of skills H-1B workers
            need to survive economic crisis</i></a> or <a class="hover-dash"><i>How cross-functional skills contribute
            to foreign employees' wage</i></a>.
        </p>
        <p>
            <a class="btn btn-secondary btn-md" href="https://github.com/wenoptics/ce-dataset-exploration-and-visualization" role="button">GitHub »</a>
            <a class="btn btn-secondary btn-md" href="http://courses.sci.pitt.edu/courses/view/INFSCI-2415" role="button">INFSCI 2415 »</a>
        </p>
    </div>
</div>

<div style="background-color: #FBF7F2">
    <div id="svg-container">
        <figure>
            <!--    <figcaption>HTML interaction dev</figcaption>-->
            <object style="opacity: 0" class="svg" id='svg_fig' type="image/svg+xml" data="res/out_3x.svg"></object>
        </figure>
        <!--        <figure>-->
        <!--            <object style="opacity: 0" class="svg" id='svg_layer_icon' type="image/svg+xml" data="res/label/SVG/layer-label-icons.svg"></object>-->
        <!--        </figure>-->
        <!--        <figure>-->
        <!--            <object style="opacity: 0" class="svg" id='svg_layer_text' type="image/svg+xml" data="res/label/SVG/layer-label-texts.svg"></object>-->
        <!--        </figure>-->
        <figure>
            <object style="opacity: 0" class="svg" id='svg_layer' type="image/svg+xml" data="res/label/SVG/layer.svg"></object>
        </figure>
    </div>
</div>

<div class="section-block" style="background-color: #FCF5E2; padding: 6em 3em">
    <div class="container">

        <h2 class="display-5">Legend</h2>
        <!--        <p>In this research, we analysed data from Current Employment Statistics (CES)-->
        <!--            by Bureau of Labor Statistics, H-1B Case Disclosure Data by Office of Foreign-->
        <!--            Labor Certification (OFLC) , Occupation skill set data by O*NET and North-->
        <!--            American Industry Classification System (NAICS), revealed the some relationships-->
        <!--            in un-/employment rate versus some phenomenal historical events (financial-->
        <!--            crises), wage level and cross-functional skills [1] for occupations in selected-->
        <!--            industries across finance, legal, computer and etc.-->
        <!--        </p>-->

        <p>
            The <a class="hover-dash" id="hovertext-fig-left">figures on the left</a>, are the employment rate from 1999 to 2018, extending over
            two well-known economic crisis i.e. the 2000 Dot-com Bubble and the Financial
            Crisis of 2007-2008. The <a class="hover-dash" id="hovertext-fig-right">figures on the right</a> are the sub-industries under the individual
            industries. Bars show the annual wage (in U.S. dollar) of the H-1B workers fall into
            the sub-industries. Stacked colors are shown in proportional to the cross-functional
            skills that required for the occupation.
        </p>

        <p>
            The 9 selected industries are <i>Management and technical consulting services</i>,
            <i>Computer systems design and related services</i>,
            <i>Scientific research and development services</i>,
            <i>Legal services</i>,
            <i>Accounting and bookkeeping services</i>,
            <i>Advertising and related services</i>,
            <i>Specialized design services</i>,
            <i>Architectural and engineering services</i> and
            <i>Other professional and technical services</i>,
            all belongs to <i>Professional, Scientific, and Technical Services</i> (NAICS code 54 [1]).

            The employment rate data are collected in month precision, on non-supervisory employees or production workers
            nation-wide.
        </p>

<!--    </div>-->
<!--</div>-->

<!--<div class="section-block" style="background-color: #FBF7F2; padding: 6em 3em">-->
<!--    <div class="container">-->
        <br>
        <br>

        <h2 class="display-5">Cross-Functional Skills</h2>
        <p>
            Cross-functional skills are defined as developed capacities that facilitate performance of
            activities that occur across jobs:
        </p>
        <div class="row row-cols-1 row-cols-lg-5">
            <div class="col mb-4">
                <div class="card text-white bg-cf-social" style="max-width: 18rem;">
                    <div class="card-header">Social Skills</div>
                    <div class="card-body">
                        <i class="cf-icon" style="background-image: url(res/icon/cf_social.svg);"></i>
                        <h5 class="card-title">Social Skills</h5>
<!--                        <div class="dropdown-divider"></div>-->
                        <p class="card-text">Developed capacities used to work with people to achieve goals</p>
                    </div>
                </div>
            </div>

            <div class="col mb-4">
                <div class="card text-white bg-cf-problem" style="max-width: 18rem;">
                    <div class="card-header">Complex Problem Solving Skills</div>
                    <div class="card-body">
                        <i class="cf-icon" style="background-image: url(res/icon/cf_problem.svg);"></i>
                        <h6 class="card-title">Complex Problem Solving Skills</h6>
<!--                        <div class="dropdown-divider"></div>-->
                        <p class="card-text">Developed capacities used to solve novel, ill-defined problems in complex, real-world settings</p>
                    </div>
                </div>
            </div>

            <div class="col mb-4">
                <div class="card text-white bg-cf-tech" style="max-width: 18rem;">
                    <div class="card-header">Technical Skills</div>
                    <div class="card-body">
                        <i class="cf-icon" style="background-image: url(res/icon/cf_tech.svg);"></i>
                        <h5 class="card-title">Technical Skills</h5>
<!--                        <div class="dropdown-divider"></div>-->
                        <p class="card-text">Developed capacities used to design, set-up, operate, and correct malfunctions involving application of machines or technological systems</p>
                    </div>
                </div>
            </div>

            <div class="col mb-4">
                <div class="card text-white bg-cf-system" style="max-width: 18rem;">
                    <div class="card-header">Systems Skills</div>
                    <div class="card-body">
                        <i class="cf-icon" style="background-image: url(res/icon/cf_sys.svg);"></i>
                        <h5 class="card-title">Systems Skills</h5>
<!--                        <div class="dropdown-divider"></div>-->
                        <p class="card-text">Developed capacities used to understand, monitor, and improve socio-technical systems</p>
                    </div>
                </div>
            </div>


            <div class="col mb-4">
                <div class="card text-white bg-cf-resource" style="max-width: 18rem;">
                    <div class="card-header">Resource Management Skills</div>
                    <div class="card-body">
                        <i class="cf-icon" style="background-image: url(res/icon/cf_res.svg);"></i>
                        <h6 class="card-title">Resource Management Skills</h6>
<!--                        <div class="dropdown-divider"></div>-->
                        <p class="card-text">Developed capacities used to allocate resources efficiently</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="section-block" style="background-color: #78634E; color: #F7F1EB">
    <div class="container">
        <p>In this research, we analysed data from Current Employment Statistics (CES)
            by Bureau of Labor Statistics, H-1B Case Disclosure Data by Office of Foreign
            Labor Certification (OFLC) , Occupation skill set data by O*NET and North
            American Industry Classification System (NAICS), revealed the some relationships
            in un-/employment rate versus some phenomenal historical events (financial
            crises), wage level and cross-functional skills [2] for occupations in selected
            industries across finance, legal, computer and etc.
        </p>
    </div>
</div>

<div class="section-block" style="background-color: #FBF7F2; padding: 6em 3em">
    <div class="container">

        <h2 class="display-5">Key Findings</h2>
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">

                    <p>
                        The 9 selected industries (from <i>Professional, Scientific, and Technical Services</i>) shows diverse
                        patterns in employment growth rate over the decades. It's worthy of mention that the year 2000 and the year
                        2008 cause significant negative employment rate on most industries including advertising, accounting, architecture and
                        engineering, specialized design and etc, which may have strong correlation to the 2000 Dot-com Bubble and
                        the Financial crisis of 2007–2008.
                    </p>

                    <p>
                        <i>Computer system design</i> and its sub-industries have better resistance against the 2008 mortgage crisis,
                        however it was struck hard in the 2000 crisis. The <i>legal</i> shows no negative growth in the 2000 crisis
                        but like most industries, had a huge drop in employment rate in 2008.
                    </p>

                    <p>
                        Interestingly, the <i>scientific research and development</i> shows no correlation to the two financial crises.
                        The sub-industries included
                    </p>
                    <ul>
                        <li>Research and Development in Nanotechnology</li>
                        <li>Research and Development in Biotechnology (except Nanobiotechnology)</li>
                        <li>Research and Development in the Physical, Engineering, and Life Sciences (except Nanotechnology and Biotechnology)</li>
                        <li>Research and Development in the Social Sciences and Humanities</li>
                    </ul>

                </div>
                <div class="col-md-4">
                    <img src="res/icon/salesman_c.svg" class="img-fluid" style="opacity: 0.8; width: 100%" alt=""/>
                </div>
            </div>
        </div>

    </div>
</div>


<div class="section-block" style="background-color: #C7C3BF; color: #FBF7F2">
    <div class="container">
        <h2 class="display-5">Credits</h2>
        <br>
        <p>Authors: Guangxue Wen | Guangqin Ran | Ping-Kang Huang</p>
        <p>
            INFSCI 2415 <a href="http://courses.sci.pitt.edu/courses/view/INFSCI-2415">Information Visualization</a>
            | Prof. <a href="http://lingfeiwu.github.io/">Lingfei Wu</a>
        </p>
    </div>
</div>

<!--<div class="section-block" style="background-color: #7A7876; color: #F7F1EB">-->
<!--    <div class="container">-->
<!--        <h2 class="display-5">Credits</h2>-->
<!--    </div>-->
<!--</div>-->

<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js"></script>

<script>
    // console.log($("#svg_fig").find('#text_26'))
    // var svg = Snap("#svg_fig");
    const COLOR_BG_HIGHLIGHT_OVER = '#f9c39530';
    const ALPHA_OVER = 1;
    const ALPHA_LEAVE = 0.7;
    let ax_left = [], ax_right = [], ax_left_label = [];
    let ax_left_el = [], ax_right_el = [], ax_left_label_el = [];
    let ax_left_yaxis = [];
    let ax_right_label = [];
    let $label_icons;
    let $label_texts;

    function show_label_text($texts) {
        anime({
            targets: $texts.toArray(),
            // translateY: [-10, 0],
            opacity: [0, 1],
            delay: anime.stagger(50),
        });
    }
    function hide_label_text($texts) {
        anime({
            targets: $texts.toArray(),
            // translateY: [0, -10],
            opacity: [1, 0],
            delay: anime.stagger(50),
        });
    }
    function show_wavy_anim(idx) {
        anime({
            targets: ax_left[idx].find('g[id^=PolyCollection_]').toArray(),
            scaleY: [1.1, 1],
            duration: 3000,
            // easing: 'linear'
        });
    }
    function leftlabel_focus(idx) {
        anime({
            targets: $label_icons.get(idx),
            translateY: [0, 80],
            opacity: [1, 0],
            duration: 200,
        });
        anime({
            targets: $label_texts.get(idx),
            translateY: [-80, 0],
            opacity: [0, 1],
            duration: 200,
        });
    }
    function leftlabel_idel(idx) {
        anime({
            targets: $label_texts.get(idx),
            translateY: [0, 80],
            opacity: [1, 0],
            duration: 200,
        });
        anime({
            targets: $label_icons.get(idx),
            translateY: [-80, 0],
            opacity: [0, 1],
            duration: 200,
        });
    }
    function show_yaxis(idx) {
        ax_left_yaxis[idx].css('opacity', 1);
        // anime({
        //     targets: ax_left_yaxis[idx],
        //     // translateX: 0,
        //     opacity: 1
        // })
    }
    function hide_yaxis(idx) {
        ax_left_yaxis[idx].css('opacity', 0);
        // anime({
        //     targets: ax_left_yaxis[idx],
        //     // translateX: -10,
        //     opacity: 0
        // })
    }

    window.addEventListener('load', function () {
        let $doc_svg = $(document.getElementById('svg_fig').contentDocument);
        let $doc_svg_layer = $(document.getElementById('svg_layer').contentDocument);
        // Labels
        $label_icons = $doc_svg_layer.find(`#label-icon > g[data-name]`);
        $label_texts = $doc_svg_layer.find(`#label-text > g[data-name]`);
        $label_icons
            .css('transform-box', 'fill-box')
            .css('transform-origin', 'center');
        $label_texts
            .css('transform-box', 'fill-box')
            .css('transform-origin', 'center')
            .css('opacity', 0);

        // Plots
        for (let i = 1; i <= 27; i++) {
            // console.log(i, $doc_svg.find('#axes_'+i));
            let $el = $doc_svg.find('#axes_'+i);
            switch (i % 3) {
                case 1:
                    ax_left_label.push($el);
                    ax_left_label_el.push($el.get(0));

                    // Initial state
                    $el.css('opacity', ALPHA_LEAVE);
                    break;

                case 2:
                    ax_left.push($el);
                    ax_left_el.push($el.get(0));

                    let $e = $el.find('>g[id^=PolyCollection_]');
                    $e.css('transform-box', 'fill-box');
                    $e.eq(1).css('transform-origin', 'top');
                    $e.eq(0).css('transform-origin', 'bottom');

                    let $el_yaxis = $el.find('>g[id^=matplotlib\\.axis_]').eq(1);
                    $el_yaxis.css('opacity', 0);
                    $el_yaxis.css('transition', 'all 250ms');
                    ax_left_yaxis.push($el_yaxis);

                    break;

                case 0:
                    ax_right.push($el);
                    ax_right_el.push($el.get(0));

                    // Initial state
                    $el.css('opacity', ALPHA_LEAVE);
                    // Off all the texts label
                    let $sec_texts = $el.find('>g[id^=text_]');
                    ax_right_label.push($sec_texts);
                    $sec_texts.css('opacity', 0);
                    $sec_texts.css('transition', 'all 250ms');

                    break;
            }

            // $el.css('transition', 'all 500ms');
            $el.data('index', Math.trunc((i-1)/3));
            // console.log($el.data('index'));

            // Mouse over effects
            $el.hover(function (e) {
                let idx = $(this).data('index');
                ax_left[idx].css('opacity', ALPHA_OVER);
                ax_right[idx].css('opacity', ALPHA_OVER);
                ax_left_label[idx].css('opacity', ALPHA_OVER);
                show_label_text( ax_right_label[idx] );
                show_wavy_anim(idx);
                leftlabel_focus(idx);
                show_yaxis(idx);
            }, function (e) {
                let idx = $(this).data('index');
                ax_left[idx].css('opacity', ALPHA_LEAVE);
                ax_right[idx].css('opacity', ALPHA_LEAVE);
                ax_left_label[idx].css('opacity', ALPHA_LEAVE);
                hide_label_text( ax_right_label[idx] );
                leftlabel_idel(idx);
                hide_yaxis(idx);
            });
        }

        // Now we have all the init states set. Save to show
        $('#svg_fig').css('opacity', 1);
        $('#svg_layer').css('opacity', 1);
        $doc_svg_layer.find('#timeline-2008').css('opacity', 0);
        $doc_svg_layer.find('#timeline-2000').css('opacity', 0);

        anime({
            targets: $label_icons.toArray(),
            scale: [0, 1],
            delay: anime.stagger(100),
        });

        anime({
            targets: ax_left_el,
            translateX: [-300, 0],
            opacity: [0, ALPHA_LEAVE],
            delay: anime.stagger(100), // increase delay by 100ms for each elements.
            complete: function () {
                // Enable the transition for interaction effects
                for (let i = 0; i < ax_left.length; i++) {
                    ax_left[i].css('transition', 'all 500ms');
                }
                for (let i = 0; i < ax_right.length; i++) {
                    ax_right[i].css('transition', 'all 500ms');
                }
            }
        });

        for (let ri = 0; ri < ax_right.length; ri++) {
            anime({
                targets: ax_right[ri].find('g[id^=patch_]').toArray().slice(0,-1),
                translateX: [-20, 0],
                opacity: [0, 1],
                delay: anime.stagger(15), // increase delay by 100ms for each elements.
            });
        }

        setTimeout(function () {
            $doc_svg_layer.find('#timeline-2008').css('transition', 'all 250ms');
            $doc_svg_layer.find('#timeline-2000').css('transition', 'all 250ms').css('opacity', 1);
            setTimeout(function () {
                $doc_svg_layer.find('#timeline-2008').css('opacity', 1);
            }, 100)
        }, 1000);


        $('#hovertext-fig-left').hover(
            function () {
                anime({
                    targets: ax_left_el,
                    opacity: ALPHA_OVER,
                    duration: 100
                });
                anime({
                    targets: ax_right_el,
                    opacity: 0.2,
                    duration: 100
                })
            }, function () {
                anime({
                    targets: ax_left_el,
                    opacity: ALPHA_LEAVE,
                    duration: 100
                });
                anime({
                    targets: ax_right_el,
                    opacity: ALPHA_LEAVE,
                    duration: 100
                })
            }
        );
        $('#hovertext-fig-right').hover(
            function () {
                anime({
                    targets: ax_right_el,
                    opacity: ALPHA_OVER,
                    duration: 100
                });
                anime({
                    targets: ax_left_el,
                    opacity: 0.2,
                    duration: 100
                })
            }, function () {
                anime({
                    targets: ax_right_el,
                    opacity: ALPHA_LEAVE,
                    duration: 100
                });
                anime({
                    targets: ax_left_el,
                    opacity: ALPHA_LEAVE,
                    duration: 100
                })
            }
        );

        // for (let i = 0; i < ax_left.length; i++) {
        //     ax_left[i]
        //         .find('g[id^=patch_]')
        //         .find('path').css('fill', 'eee');
        // }
    })


</script>

</body>
</html>